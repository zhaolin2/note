



zookeeper cp

先同步给(半数以上)从节点 然后才返回给客户端

ZAB

redis ap

加锁成功 直接返回

Redlock

并行变为串行

redis单机qps

zookeeper性能可能没有redis高

- 类装载子系统
- 运行时数据区
  - 堆
  - 方法区(元空间)
  - 线程栈
  - 本地方法栈
  - 程序计数器
- 字节码执行引擎



栈帧

一个方法对应一块栈帧内存区域

- 局部变量表
- 操作数栈
- 动态链接
- 方法出口

javap -c xxx.class > math.txt



程序计数器 

- 多线程条件下 为了继续从上次的条件下开始执行

操作数栈  暂存内存空间 进行计算的数需要一块内存空间来暂时存储

动态链接 把符号引用转变为直接引用

- 执行方法的时候 找到需要执行的方法的入口的内存地址

要返回到哪里去

- 在调用方法的时候，已经知道要从原来方法的哪里开始继续执行

栈中放的都是堆中对象的内存地址(引用)

- 常量
- 静态变量  放的是堆中对象的引用
- 类信息

本地方法栈就是本地方法运行所需要的内容空间

减少stw的次数

不stw 会导致现在不是垃圾的对象，还没扫完，就导致前边不是垃圾的对象，就变为垃圾

几个小时 几天 几周 fullgc 才算正常

每秒1-2000 压力比较大

每个机器3 400订单 经过负载均衡之后

一个对象大概1kB

G1 三色标记算法

ZGC 颜色指针 读屏障